<i class="init-controller" ng-init="activate()"></i>

<div class="page-header h1">
    <div class="container">
        <h1>Addresses</h1>
    </div>
</div>

<div class="container my-account">

    <div class="row">
        <!-- left-side menu -->
        <div ng-include="visitor/account/sidebar.html"></div>

        <!-- adresses info -->
        <div class="col-xs-12 col-sm-9">

            <!-- note: this is also inside the modal -->
            <!-- error message -->
            <ot-message-manager item="message"></ot-message-manager>

            <!-- adresses info table -->
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        Address info
                    </h3>
                </div>
                <table class="table table-hover">
                    <tbody>
                        <tr ng-repeat="address in addresses">
                            <td>{{address.Name}}</td>
                            <td class="text-right">
                                <div class="btn btn-block-xs" ng-show="isDefault(address.ID)">
                                    <i class="fa fa-star text-info"></i>
                                </div>
                                <button class="btn btn-primary btn-block-xs"
                                    ng-click="popUpOpen(address.ID)">
                                    <i class="fa fa-pencil fa-fw"></i>
                                </button>
                                <button class="btn btn-danger btn-block-xs"
                                    ng-click="remove(address.ID)">
                                    <i class="fa fa-remove fa-fw"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="panel-footer">
                    <button class="btn btn-primary"
                        ng-click="popUpOpen()">
                        Add Address
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- change address modal -->
    <div class="modal fade"
        id="parent_popup_address"
        tabindex="-1"
        role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button data-dismiss="modal"
                        class="close"
                        type="button">
                        <span aria-hidden="true">Ã—</span><span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title">{{address._id ? 'Edit' : 'Add'}} Address</h4>
                </div>


                <div class="modal-body">

                    <!-- note: this is also outside the modal -->
                    <!-- error message -->
                    <ot-message-manager item="message"></ot-message-manager>

                    <!-- Form to add/edit an addresses -->
                    <!-- addressForm -->
                    <!-- address -->

                    <ot-address-form
                        form-ctrl="addressForm"
                        form-model="address"
                        on-submit="save()">

                        <!-- Default Billing Address -->
                        <div class="row">
                            <div class="checkbox col-xs-6">
                                <label>
                                    <input type="checkbox"
                                           name="useAsDefaultBilling"
                                           ng-model="address.useAsDefaultBilling">
                                    use as default billing address
                                </label>
                            </div>

                            <!-- default shipping address -->
                            <div class="checkbox col-xs-6">
                                <label>
                                    <input type="checkbox"
                                           name="useAsDefaultShipping"
                                           ng-model="address.useAsDefaultShipping">
                                    use as default shipping address
                                </label>
                            </div>
                        </div>

                    </ot-address-form>
                </div>
                <div class="modal-footer">
                    <button type="button"
                            data-dismiss="modal"
                            class="btn btn-default">
                        Close
                    </button>
                    <button type="submit"
                            form="addAddress"
                            class="btn btn-primary">
                        Save
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

